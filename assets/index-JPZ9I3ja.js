const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PatientIntakeForm-CCUQ6NaL.js","assets/vendor-CGONjlB7.js","assets/services-jbtmFZgG.js","assets/database-DJZASbgB.js","assets/ui-DVpBiD5x.js","assets/PatientDashboard-CJxsNDv1.js","assets/PatientDetailView-BWBrNapo.js"])))=>i.map(i=>d[i]);
import{d as e,y as t,u as a,k as n,M as i,P as l,z as s,E as r}from"./vendor-CGONjlB7.js";import{i as c,r as d,p as o,_ as m,e as p}from"./services-jbtmFZgG.js";import{B as h,u,C as x,a as f,R as g,T as b,b as v,E as y,L as w,F as N}from"./ui-DVpBiD5x.js";import"./database-DJZASbgB.js";function k({className:i="",variant:l="dropdown",size:s="sm"}){const[r,d]=e(c.getCurrentLanguage()),[o,m]=e(!1);t(()=>c.subscribe(e=>{d(e)}),[]);const p=e=>{c.setLanguage(e),m(!1)},u=c.getAvailableLanguages(),x=u.find(e=>e.code===r);if("toggle"===l){const e="en"===r?"ar":"en",t=u.find(t=>t.code===e);return a(h,{variant:"ghost",size:s,onClick:()=>p(e),className:`${i} font-medium`,children:t?.nativeName})}return a("div",{className:`relative ${i}`,children:[a(h,{variant:"ghost",size:s,onClick:()=>m(!o),className:"font-medium flex items-center gap-1",children:[a("span",{children:x?.nativeName}),a("svg",{className:"w-4 h-4 transition-transform "+(o?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),o&&a(n,{children:[a("div",{className:"fixed inset-0 z-10",onClick:()=>m(!1)}),a("div",{className:"absolute top-full mt-1 right-0 bg-white border border-gray-200 rounded-lg shadow-lg z-20 min-w-[120px]",children:u.map(e=>a("button",{onClick:()=>p(e.code),className:`\n                  w-full px-3 py-2 text-left hover:bg-gray-50 first:rounded-t-lg last:rounded-b-lg\n                  flex items-center justify-between\n                  ${r===e.code?"bg-blue-50 text-blue-700":"text-gray-700"}\n                `,children:[a("span",{className:"font-medium",children:e.nativeName}),r===e.code&&a("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:a("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]},e.code))})]})]})}function C({className:n=""}){const{t:i,isRTL:l}=u(),[s,r]=e([]);if(t(()=>d.onBreadcrumbChange(r),[]),s.length<=1)return null;return a("nav",{className:`flex items-center space-x-1 text-sm text-medical-text-secondary ${n}`,"aria-label":i("nav.breadcrumb"),dir:l?"rtl":"ltr",children:s.map((e,t)=>a("div",{className:"flex items-center",children:[t>0&&a("svg",{className:"w-4 h-4 mx-1 text-gray-400 "+(l?"rotate-180":""),fill:"currentColor",viewBox:"0 0 20 20","aria-hidden":"true",children:a("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),e.active?a("span",{className:"font-medium text-medical-text-primary","aria-current":"page",children:e.label}):a("button",{onClick:()=>(async e=>{e.path&&!e.active&&await d.navigate(e.path)})(e),className:"hover:text-medical-primary transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-medical-primary focus:ring-opacity-50 rounded px-1 py-0.5",type:"button",children:e.label})]},t))})}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const z=i(({patient:e,onClick:t,onStatusUpdate:n,className:i=""})=>{const{t:l,formatDate:s}=u(),r=e=>s(e),c=(e,t)=>{e.stopPropagation(),n&&n(t)};return a("div",{className:`\n        bg-medical-surface rounded-xl shadow-sm border-l-4 border border-gray-200 \n        hover:shadow-md hover:border-gray-300 \n        transition-all duration-200 cursor-pointer \n        touch-target active:scale-[0.98]\n        ${i}\n      `,style:{borderLeftColor:e.priority.color},onClick:t,role:"button",tabIndex:0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),t())},children:a("div",{className:"p-4 sm:p-5",children:a("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3",children:[a("div",{className:"flex-1 min-w-0",children:[a("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3 mb-3",children:[a("div",{className:"priority-badge inline-flex w-fit",style:{backgroundColor:`${e.priority.color}15`,color:e.priority.color},children:[a("span",{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0",children:(e=>{switch(e){case"red":case"yellow":return a("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:a("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})});case"green":return a("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:a("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})});case"black":return a("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:a("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})});default:return null}})(e.priority.level)}),a("span",{className:"font-semibold text-xs sm:text-sm",children:e.priority.level.toUpperCase()})]}),a("div",{className:"flex items-center gap-2 sm:gap-3",children:[a("span",{className:"text-base sm:text-lg font-mono font-semibold text-medical-text-primary",children:(d=e.id,`#${d.slice(0,8).toUpperCase()}`)}),a("span",{className:"text-xs sm:text-sm text-medical-text-secondary capitalize bg-gray-100 px-2 py-1 rounded-md",children:e.ageGroup})]})]}),a("p",{className:"text-sm sm:text-base text-medical-text-secondary mb-2 font-medium",children:e.priority.description}),a("p",{className:"text-xs sm:text-sm text-medical-text-muted mb-3 line-clamp-2",children:(()=>{const{vitals:t}=e,a=[];return t.pulse&&a.push(`${l("intake.pulse")}: ${t.pulse}`),"normal"!==t.breathing&&a.push(`${l("intake.breathing")}: ${t.breathing}`),"normal"!==t.circulation&&a.push(`${l("intake.circulation")}: ${t.circulation}`),"alert"!==t.consciousness&&a.push(`${l("intake.consciousness")}: ${t.consciousness}`),a.length>0?a.join(" • "):l("intake.normalVitals")})()}),e.injuries.length>0&&a("div",{className:"mb-3",children:a("p",{className:"text-xs sm:text-sm text-medical-text-secondary",children:[a("span",{className:"font-medium text-medical-text-primary",children:[l("intake.injuries"),":"]})," ",a("span",{className:"line-clamp-1",children:[e.injuries.slice(0,2).join(", "),e.injuries.length>2&&` +${e.injuries.length-2} more`]})]})}),a("div",{className:"text-xs text-medical-text-muted space-y-1 sm:space-y-0 sm:space-x-3 sm:flex",children:[a("span",{children:[l("patient.assessedAt"),": ",r(e.timestamp)]}),e.lastUpdated.getTime()!==e.timestamp.getTime()&&a("span",{className:"block sm:inline",children:[a("span",{className:"hidden sm:inline",children:"•"})," ",l("patient.lastUpdated"),":"," ",r(e.lastUpdated)]})]})]}),a("div",{className:"flex flex-col sm:items-end space-y-2 sm:ml-4 shrink-0",children:[a("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium w-fit ${(e=>{switch(e){case"active":return"bg-blue-100 text-blue-800";case"treated":return"bg-green-100 text-green-800";case"transferred":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}})(e.status)}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)}),"active"===e.status&&n&&a("div",{className:"flex flex-wrap gap-1 sm:gap-2",children:[a("button",{onClick:e=>c(e,"treated"),className:"touch-target text-xs bg-green-100 text-green-700 px-2 py-1 rounded-md hover:bg-green-200 active:bg-green-300 transition-colors font-medium",title:`${l("common.markAs")} ${l("status.treated")}`,children:l("status.treated")}),a("button",{onClick:e=>c(e,"transferred"),className:"touch-target text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded-md hover:bg-purple-200 active:bg-purple-300 transition-colors font-medium",title:`${l("common.markAs")} ${l("status.transferred")}`,children:l("status.transferred")})]}),a("div",{className:"text-medical-text-muted self-end",children:a("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]})})});var d},(e,t)=>e.patient.id===t.patient.id&&e.patient.status===t.patient.status&&e.patient.priority.level===t.patient.priority.level&&e.patient.lastUpdated.getTime()===t.patient.lastUpdated.getTime()&&e.className===t.className);function L({className:n=""}){const{t:i}=u(),[l,s]=e(!1),[r,c]=e(!1),[d,m]=e(null);t(()=>{if(o.isInstalled())return;const e=localStorage.getItem("pwa-install-dismissed");if(e){const t=parseInt(e);if((Date.now()-t)/864e5<7)return}const t=e=>{e.preventDefault(),m(e),s(!0)},a=()=>{s(!1),m(null),localStorage.removeItem("pwa-install-dismissed")};window.addEventListener("beforeinstallprompt",t),window.addEventListener("appinstalled",a);const n=window.setTimeout(()=>{o.isInstalled()||e||s(!0)},1e4);return()=>{window.removeEventListener("beforeinstallprompt",t),window.removeEventListener("appinstalled",a),window.clearTimeout(n)}},[]);const p=()=>{s(!1),localStorage.setItem("pwa-install-dismissed",Date.now().toString())};return l?a("div",{className:`pwa-install-banner ${n}`,children:[a(x,{variant:"elevated",padding:"md",className:"install-banner-card",children:a("div",{className:"flex items-start gap-3",children:[a("div",{className:"install-icon",children:a("svg",{className:"w-8 h-8 text-medical-primary",fill:"currentColor",viewBox:"0 0 20 20",children:a("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z",clipRule:"evenodd"})})}),a("div",{className:"flex-1 min-w-0",children:[a("h3",{className:"text-sm font-semibold text-medical-text-primary mb-1",children:i("pwa.installTitle","Install TriageAid")}),a("p",{className:"text-xs text-medical-text-secondary mb-3 leading-relaxed",children:i("pwa.installDescription","Get quick access and work offline by installing the app on your device.")}),a("div",{className:"flex items-center gap-2",children:[a(h,{variant:"primary",size:"sm",onClick:async()=>{if(d){c(!0);try{d.prompt();const{outcome:e}=await d.userChoice;"accepted"===e?(s(!1),m(null)):c(!1)}catch(e){c(!1)}}else s(!1)},disabled:r,className:"text-xs",children:r?i("pwa.installing","Installing..."):i("pwa.install","Install")}),a(h,{variant:"ghost",size:"sm",onClick:p,className:"text-xs text-medical-text-secondary",children:i("pwa.notNow","Not now")})]})]}),a("button",{onClick:p,className:"text-medical-text-secondary hover:text-medical-text-primary p-1 -m-1","aria-label":i("common.close","Close"),children:a("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:a("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})}),a("style",{jsx:!0,children:"\n        .pwa-install-banner {\n          position: fixed;\n          bottom: 1rem;\n          left: 1rem;\n          right: 1rem;\n          z-index: 50;\n          animation: slideUp 0.3s ease-out;\n        }\n\n        .install-banner-card {\n          border: 1px solid #e5e7eb;\n          box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);\n        }\n\n        .install-icon {\n          flex-shrink: 0;\n          width: 2rem;\n          height: 2rem;\n          background: rgba(30, 64, 175, 0.1);\n          border-radius: 0.5rem;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        }\n\n        @keyframes slideUp {\n          from {\n            transform: translateY(100%);\n            opacity: 0;\n          }\n          to {\n            transform: translateY(0);\n            opacity: 1;\n          }\n        }\n\n        @media (min-width: 640px) {\n          .pwa-install-banner {\n            left: auto;\n            right: 1rem;\n            max-width: 320px;\n          }\n        }\n\n        @media (max-width: 480px) {\n          .pwa-install-banner {\n            left: 0.5rem;\n            right: 0.5rem;\n          }\n        }\n      "})]}):null}function R({className:n=""}){const{t:i}=u(),[l,s]=e({available:!1,waiting:!1}),[r,c]=e(!1),[d,m]=e(!1),[p,f]=e("");t(()=>{const e=o.onUpdate(e=>{s(e),e.available&&e.waiting&&c(!0)});return o.getVersion().then(f),e},[]);const g=()=>{c(!1)};return r&&l.available?a("div",{className:`app-update-notification ${n}`,children:[a(x,{variant:"elevated",padding:"md",className:"update-notification-card",children:a("div",{className:"flex items-start gap-3",children:[a("div",{className:"update-icon",children:a("svg",{className:"w-6 h-6 text-medical-success animate-pulse",fill:"currentColor",viewBox:"0 0 20 20",children:a("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})})}),a("div",{className:"flex-1 min-w-0",children:[a("h3",{className:"text-sm font-semibold text-medical-text-primary mb-1",children:i("pwa.updateAvailable","Update Available")}),a("p",{className:"text-xs text-medical-text-secondary mb-3 leading-relaxed",children:i("pwa.updateDescription","A new version of TriageAid is ready with improvements and bug fixes.")}),p&&a("p",{className:"text-xs text-medical-text-secondary mb-3 opacity-75",children:[i("pwa.currentVersion","Current version"),": ",p]}),a("div",{className:"flex items-center gap-2",children:[a(h,{variant:"primary",size:"sm",onClick:async()=>{if(l.waiting){m(!0);try{await o.applyUpdate()}catch(e){m(!1),c(!1)}}},disabled:d,className:"text-xs",children:d?i("pwa.updating","Updating..."):i("pwa.updateNow","Update Now")}),a(h,{variant:"ghost",size:"sm",onClick:()=>{window.location.reload()},className:"text-xs text-medical-text-secondary",children:i("pwa.refresh","Refresh")}),a(h,{variant:"ghost",size:"sm",onClick:g,className:"text-xs text-medical-text-secondary",children:i("pwa.later","Later")})]})]}),a("button",{onClick:g,className:"text-medical-text-secondary hover:text-medical-text-primary p-1 -m-1","aria-label":i("common.close","Close"),children:a("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:a("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})}),a("style",{jsx:!0,children:"\n        .app-update-notification {\n          position: fixed;\n          top: 1rem;\n          right: 1rem;\n          z-index: 60;\n          animation: slideIn 0.3s ease-out;\n          max-width: 350px;\n        }\n\n        .update-notification-card {\n          border: 1px solid #10b981;\n          background: #f0fdf4;\n          box-shadow: 0 10px 25px rgba(16, 185, 129, 0.15);\n        }\n\n        .update-icon {\n          flex-shrink: 0;\n          width: 2rem;\n          height: 2rem;\n          background: rgba(16, 185, 129, 0.1);\n          border-radius: 0.5rem;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        }\n\n        @keyframes slideIn {\n          from {\n            transform: translateX(100%);\n            opacity: 0;\n          }\n          to {\n            transform: translateX(0);\n            opacity: 1;\n          }\n        }\n\n        @media (max-width: 640px) {\n          .app-update-notification {\n            left: 1rem;\n            right: 1rem;\n            max-width: none;\n          }\n        }\n\n        @media (max-width: 480px) {\n          .app-update-notification {\n            left: 0.5rem;\n            right: 0.5rem;\n          }\n        }\n      "})]}):null}function I({className:n=""}){const[i,l]=e(o.getStatus()),[s,r]=e({available:!1,waiting:!1}),[c,d]=e(!1),[m,p]=e(!1),[h,u]=e(!1);t(()=>{const e=o.onStatusChange(l),t=o.onUpdate(e=>{r(e),e.available&&d(!0)}),a=e=>{e.preventDefault(),window.deferredPrompt=e,p(!0)};return window.addEventListener("beforeinstallprompt",a),()=>{e(),t(),window.removeEventListener("beforeinstallprompt",a)}},[]);return a("div",{className:`pwa-status ${n}`,children:[c&&a("div",{className:"update-prompt",children:a("div",{className:"update-content",children:[a("div",{className:"update-icon",children:"🔄"}),a("div",{className:"update-text",children:[a("h3",{children:"Update Available"}),a("p",{children:"A new version of TriageAid is ready to install."})]}),a("div",{className:"update-actions",children:[a("button",{onClick:async()=>{if(s.waiting){u(!0);try{await o.applyUpdate(),d(!1)}catch(e){u(!1)}}},disabled:h,className:"btn btn-primary btn-sm",children:h?"Updating...":"Update Now"}),a("button",{onClick:()=>{d(!1)},className:"btn btn-secondary btn-sm",children:"Later"})]})]})}),m&&!i.isInstalled&&a("div",{className:"install-prompt",children:a("div",{className:"install-content",children:[a("div",{className:"install-icon",children:"📱"}),a("div",{className:"install-text",children:[a("h3",{children:"Install TriageAid"}),a("p",{children:"Install the app for quick access and better offline experience."})]}),a("div",{className:"install-actions",children:[a("button",{onClick:async()=>{await o.showInstallPrompt()&&p(!1)},className:"btn btn-primary btn-sm",children:"Install"}),a("button",{onClick:()=>{p(!1)},className:"btn btn-secondary btn-sm",children:"Not Now"})]})]})}),a("style",{jsx:!0,children:"\n        .pwa-status {\n          position: relative;\n        }\n\n        @keyframes pulse {\n          0%,\n          100% {\n            opacity: 1;\n          }\n          50% {\n            opacity: 0.5;\n          }\n        }\n\n        .update-prompt,\n        .install-prompt {\n          position: fixed;\n          top: 1rem;\n          right: 1rem;\n          background: white;\n          border-radius: 8px;\n          box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);\n          border: 1px solid #e5e7eb;\n          max-width: 320px;\n          z-index: 1000;\n          animation: slideIn 0.3s ease-out;\n        }\n\n        @keyframes slideIn {\n          from {\n            transform: translateX(100%);\n            opacity: 0;\n          }\n          to {\n            transform: translateX(0);\n            opacity: 1;\n          }\n        }\n\n        .update-content,\n        .install-content {\n          padding: 1rem;\n        }\n\n        .update-icon,\n        .install-icon {\n          font-size: 1.5rem;\n          margin-bottom: 0.5rem;\n        }\n\n        .update-text h3,\n        .install-text h3 {\n          font-size: 1rem;\n          font-weight: 600;\n          color: #111827;\n          margin-bottom: 0.25rem;\n        }\n\n        .update-text p,\n        .install-text p {\n          font-size: 0.875rem;\n          color: #6b7280;\n          margin-bottom: 1rem;\n          line-height: 1.4;\n        }\n\n        .update-actions,\n        .install-actions {\n          display: flex;\n          gap: 0.5rem;\n          justify-content: flex-end;\n        }\n\n        .btn {\n          padding: 0.5rem 1rem;\n          border-radius: 6px;\n          font-size: 0.875rem;\n          font-weight: 500;\n          border: none;\n          cursor: pointer;\n          transition: all 0.2s ease;\n        }\n\n        .btn:disabled {\n          opacity: 0.6;\n          cursor: not-allowed;\n        }\n\n        .btn-sm {\n          padding: 0.375rem 0.75rem;\n          font-size: 0.8125rem;\n        }\n\n        .btn-primary {\n          background: #1e40af;\n          color: white;\n        }\n\n        .btn-primary:hover:not(:disabled) {\n          background: #1d4ed8;\n        }\n\n        .btn-secondary {\n          background: #f3f4f6;\n          color: #374151;\n          border: 1px solid #d1d5db;\n        }\n\n        .btn-secondary:hover {\n          background: #e5e7eb;\n        }\n\n        @media (max-width: 640px) {\n          .update-prompt,\n          .install-prompt {\n            left: 1rem;\n            right: 1rem;\n            max-width: none;\n          }\n        }\n      "})]})}const j=s(()=>m(()=>import("./PatientIntakeForm-CCUQ6NaL.js"),__vite__mapDeps([0,1,2,3,4])).then(e=>({default:e.PatientIntakeForm}))),A=s(()=>m(()=>import("./PatientDashboard-CJxsNDv1.js"),__vite__mapDeps([5,1,2,3,4])).then(e=>({default:e.PatientDashboard}))),D=s(()=>m(()=>import("./PatientDetailView-BWBrNapo.js"),__vite__mapDeps([6,1,2,3,4])).then(e=>({default:e.PatientDetailView})));function E(){const{t:i,isRTL:s,direction:r}=u(),{currentView:d,params:m,navigate:z,navigateToView:E}=f(),[$,T]=e(null),[U,M]=e(!1),[P,B]=e(!1),_=m.id||null;t(()=>{(async()=>{try{await c.initialize(),B(!0),await o.initialize(),M(!0);const e=e=>{T(e)};p.setToastCallback(e)}catch(e){B(!0),M(!0),e instanceof Error&&p.handleError({type:"system",code:"INITIALIZATION_FAILED",message:e.message,details:e,timestamp:new Date,recoverable:!0})}})()},[]);const V=()=>{E("intake"),T(null)},S=()=>{E("dashboard"),T(null)},H=()=>{E("dashboard")},O=e=>{E("patient-detail",{id:e}),T(null)},W=()=>{z("/"),T(null)},F=()=>{E("dashboard")};return a("div",P?{class:"min-h-screen bg-medical-background "+(s?"rtl":"ltr"),dir:r,children:[a("div",{class:"fixed top-4 z-50 flex items-center gap-2 "+(s?"left-4":"right-4"),children:[a(k,{variant:"dropdown"}),U&&a(I,{})]}),d&&"home"!==d&&a("nav",{class:"bg-medical-surface shadow-sm border-b border-gray-200 safe-top",children:a(g,{maxWidth:"full",padding:"sm",children:a("div",{class:"flex items-center justify-between",children:[a("div",{class:"flex items-center space-x-2 sm:space-x-4 min-w-0 flex-1",children:[a(h,{variant:"ghost",size:"sm",onClick:W,className:"text-medical-primary hover:text-blue-700 font-medium shrink-0",children:s?"مساعد الفرز ←":"← TriageAid"}),a("span",{class:"text-gray-300 hidden sm:inline",children:"|"}),a("div",{class:"min-w-0 flex-1",children:[a(C,{className:"hidden sm:block"}),a("span",{class:"text-medical-text-primary font-medium text-sm sm:hidden truncate",children:["dashboard"===d&&i("nav.dashboard"),"intake"===d&&i("nav.assessment"),"patient-detail"===d&&`${i("nav.patientDetails")}${_?` - #${_.slice(0,8).toUpperCase()}`:""}`]})]})]}),"dashboard"===d&&a(h,{variant:"primary",size:"sm",onClick:V,className:"shrink-0 "+(s?"mr-2":"ml-2"),children:[a("span",{class:"hidden sm:inline",children:i("nav.newAssessment")}),a("span",{class:"sm:hidden",children:i("nav.new")})]})]})})}),a(g,{maxWidth:"3xl",padding:"md",className:"safe-bottom",children:[U&&a(n,{children:[a(R,{}),a(L,{})]}),$&&a(b,{message:$.message,type:$.type,duration:$.duration,actions:$.actions,onClose:()=>T(null)}),a(v,{position:"top-right",maxToasts:3}),(!d||"home"===d)&&a("div",{class:"text-center animate-fade-in",children:a(x,{variant:"elevated",padding:"lg",className:"max-w-2xl mx-auto",children:[a("div",{class:"mb-8",children:[a("svg",{class:"w-20 h-20 sm:w-24 sm:h-24 mx-auto mb-6",viewBox:"0 0 512 512",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a("circle",{cx:"256",cy:"256",r:"256",fill:"#1E40AF"}),a("rect",{x:"216",y:"136",width:"80",height:"240",rx:"8",fill:"white"}),a("rect",{x:"136",y:"216",width:"240",height:"80",rx:"8",fill:"white"}),a("circle",{cx:"180",cy:"180",r:"16",fill:"#DC2626"}),a("circle",{cx:"332",cy:"180",r:"16",fill:"#D97706"}),a("circle",{cx:"180",cy:"332",r:"16",fill:"#059669"}),a("circle",{cx:"332",cy:"332",r:"16",fill:"#374151"})]}),a("h1",{class:"text-responsive-2xl font-bold text-medical-text-primary mb-3",children:i("home.title")}),a("p",{class:"text-responsive-base text-medical-text-secondary mb-8 max-w-md mx-auto",children:i("home.subtitle")}),a("div",{class:"flex flex-col sm:flex-row gap-4 justify-center max-w-md mx-auto",children:[a(h,{variant:"primary",size:"lg",fullWidth:!0,onClick:V,className:"sm:flex-1",children:i("home.startAssessment")}),a(h,{variant:"outline",size:"lg",fullWidth:!0,onClick:S,className:"sm:flex-1",children:i("home.viewDashboard")})]})]}),a("div",{class:"grid grid-cols-1 sm:grid-cols-3 gap-4 mt-8 pt-8 border-t border-gray-200",children:[a("div",{class:"text-center",children:[a("div",{class:"w-12 h-12 bg-medical-primary bg-opacity-10 rounded-lg flex items-center justify-center mx-auto mb-3",children:a("svg",{class:"w-6 h-6 text-medical-primary",fill:"currentColor",viewBox:"0 0 20 20",children:a("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a("h3",{class:"text-sm font-medium text-medical-text-primary mb-1",children:i("home.features.startProtocol")}),a("p",{class:"text-xs text-medical-text-secondary",children:i("home.features.startProtocolDesc")})]}),a("div",{class:"text-center",children:[a("div",{class:"w-12 h-12 bg-medical-success bg-opacity-10 rounded-lg flex items-center justify-center mx-auto mb-3",children:a("svg",{class:"w-6 h-6 text-medical-success",fill:"currentColor",viewBox:"0 0 20 20",children:a("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z",clipRule:"evenodd"})})}),a("h3",{class:"text-sm font-medium text-medical-text-primary mb-1",children:i("home.features.offlineReady")}),a("p",{class:"text-xs text-medical-text-secondary",children:i("home.features.offlineReadyDesc")})]}),a("div",{class:"text-center",children:[a("div",{class:"w-12 h-12 bg-medical-accent bg-opacity-10 rounded-lg flex items-center justify-center mx-auto mb-3",children:a("svg",{class:"w-6 h-6 text-medical-accent",fill:"currentColor",viewBox:"0 0 20 20",children:a("path",{fillRule:"evenodd",d:"M18 8a6 6 0 01-7.743 5.743L10 14l-1 1-1 1H6v2H2v-4l4.257-4.257A6 6 0 1118 8zm-6-4a1 1 0 100 2 2 2 0 012 2 1 1 0 102 0 4 4 0 00-4-4z",clipRule:"evenodd"})})}),a("h3",{class:"text-sm font-medium text-medical-text-primary mb-1",children:i("home.features.secure")}),a("p",{class:"text-xs text-medical-text-secondary",children:i("home.features.secureDesc")})]})]}),a("div",{class:"flex flex-col sm:flex-row gap-3 mt-6 pt-6 border-t border-gray-200",children:[a("a",{href:"https://afif-fahim.notion.site/TriageAid-Offline-Medical-Triage-Assessment-Tool-2326e231ee9580959117d64a242032e9",target:"_blank",rel:"noopener noreferrer",class:"flex items-center justify-center gap-2 px-4 py-2 text-sm text-medical-text-secondary hover:text-medical-primary transition-colors duration-200 rounded-lg hover:bg-gray-50 flex-1",children:[a("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:a("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),i("home.documentation")]}),a("a",{href:"https://github.com/afif-fahim/triage-aid",target:"_blank",rel:"noopener noreferrer",class:"flex items-center justify-center gap-2 px-4 py-2 text-sm text-medical-text-secondary hover:text-medical-primary transition-colors duration-200 rounded-lg hover:bg-gray-50 flex-1",children:[a("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:a("path",{fillRule:"evenodd",d:"M10 0C4.477 0 0 4.484 0 10.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0110 4.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.203 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.942.359.31.678.921.678 1.856 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0020 10.017C20 4.484 15.522 0 10 0z",clipRule:"evenodd"})}),i("home.githubProject")]})]})]})}),"dashboard"===d&&a("div",{class:"animate-fade-in",children:a(y,{fallback:a(N,{title:i("error.dashboardError"),message:i("error.dashboardErrorDesc"),onRetry:S,onReset:W}),children:a(l,{fallback:a(w,{size:"lg"}),children:a(A,{onPatientSelect:O})})})}),"intake"===d&&a("div",{class:"animate-fade-in",children:a(y,{fallback:a(N,{title:i("error.intakeError"),message:i("error.intakeErrorDesc"),onRetry:V,onReset:H}),children:a(l,{fallback:a(w,{size:"lg"}),children:a(j,{onSubmit:e=>{T({message:i("toast.patientCreated"),type:"success"}),E("dashboard")},onCancel:H})})})}),"patient-detail"===d&&_&&a("div",{class:"animate-fade-in",children:a(y,{fallback:a(N,{title:i("error.patientDetailError"),message:i("error.patientDetailErrorDesc"),onRetry:()=>O(_),onReset:F}),children:a(l,{fallback:a(w,{size:"lg"}),children:a(D,{patientId:_,onClose:F,onPatientUpdate:(e,t)=>{T({message:i("toast.patientUpdated"),type:"success"})},onPatientDelete:e=>{T({message:i("toast.patientDeleted"),type:"success"}),E("dashboard")}})})})})]})]}:{class:"min-h-screen bg-medical-background flex items-center justify-center",children:a("div",{class:"text-medical-text-secondary",children:"Loading..."})})}!async function(){try{await c.initialize();const e=document.getElementById("app");e&&r(a(E,{}),e)}catch(e){const t=document.getElementById("app");t&&r(a(E,{}),t)}}();export{z as P};
